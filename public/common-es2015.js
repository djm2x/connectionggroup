(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"5WMv":function(n,l,e){"use strict";e.d(l,"a",(function(){return s}));var t=e("mrSG"),i=e("XNiG");class s{constructor(n,l){this.filesService=n,this.url=l,this.listOfNames=[],this.imagesToShow=[],this.listToDelete=[],this.files=[],this.nameBtn="",this.folderToSaveInServer="folder",this.multiple=!1,this.oneImage="assets/404.jpg",this.Images=[],this.propertyOfParent=new i.a,this.eventSubmitToParent=new i.a,this.eventSubmitFromParent=new i.a}ngOnInit(){this.propertyOfParent.subscribe(n=>{const l=n?n.split(";"):[];if(l.pop(),this.listOfNames=l,this.listToDelete=[],console.log(l),this.multiple)l.forEach((n,l)=>{const e=n;if(null!==e&&e.startsWith("http"))this.Images[l]={name:e,image:e};else if(e){const n=`${this.url}/${this.folderToSaveInServer.replace("_","/")}/${e}`;this.Images[l]={name:n,image:n}}else this.Images[l]={name:"assets/404.jpg",image:"assets/404.jpg"}});else{const n=0!==l.length?l[0]:null;this.oneImage=null!==n&&n.startsWith("http")?n:n?`${this.url}/${this.folderToSaveInServer}/${n}`:"assets/404.jpg"}}),this.eventSubmitFromParent.subscribe(n=>t.a(this,void 0,void 0,(function*(){yield this.submit(n)})))}upload(n){if(this.multiple)for(let l=0;l<n.length;l++){const e=n.item(l);this.listOfNames.push(this.setFileName(e)),this.sendPropertyOfParent(),this.files.push(e),this.files.forEach((n,l)=>{const e=new FileReader;e.onload=()=>{-1===this.Images.findIndex(l=>this.setFileName(n).includes(l.name))&&this.Images.push({name:this.setFileName(n),image:e.result.toString()})},e.readAsDataURL(n)})}else{const l=n.item(0);this.listOfNames=[],this.listOfNames.push(this.setFileName(l)),this.sendPropertyOfParent(),this.files=[],this.files.push(l),this.handleFileInput(l)}}fileToImageFrom(){}handleFileInput(n){const l=new FileReader;l.onload=()=>this.oneImage=l.result.toString(),l.readAsDataURL(n)}imgError(n){n.src="assets/404.jpg"}setIcon(n){const l=n.lastIndexOf("."),e=n.substring(l+1);return"pdf"===e||"pdf;"===e?"assets/svg/pdf.svg":"assets/svg/word.svg"}removeFromImages(n){const l=this.Images.findIndex(l=>n.includes(l.name));this.Images.splice(l,1);const e=this.listOfNames.findIndex(l=>n.includes(l));this.listToDelete.push(this.listOfNames[e]),-1!==e&&(this.listOfNames.splice(e,1),this.sendPropertyOfParent());const t=n.indexOf("_"),i=n.substring(t);-1!==this.files.findIndex(n=>n.name===i)&&this.files.splice(e,1)}remove(n){const l=this.listOfNames.findIndex(l=>n.includes(l));this.listToDelete.push(this.listOfNames[l]),-1!==l&&(this.listOfNames.splice(l,1),this.sendPropertyOfParent());const e=n.indexOf("_"),t=n.substring(e);-1!==this.files.findIndex(n=>n.name===t)&&this.files.splice(l,1),this.oneImage="assets/404.jpg"}openInput(n){n.click()}sendPropertyOfParent(){let n="";this.listOfNames.forEach(l=>{n+=`${l};`}),this.eventSubmitToParent.next(n)}submit(n){return t.a(this,void 0,void 0,(function*(){const l=new FormData;if(this.files.forEach(n=>{const e=this.setFileName(n);l.append("file",n,e),console.log(n)}),l){n.id&&!this.folderToSaveInServer.includes("_")&&(this.folderToSaveInServer=`${this.folderToSaveInServer}_${n.id}`);const e=yield this.filesService.uploadFiles(l,this.folderToSaveInServer).toPromise(),t=yield this.filesService.deleteFiles(this.listToDelete,this.folderToSaveInServer).toPromise();console.log(e,t)}}))}setFileName(n){return`${n.lastModified}_${n.name}`}}},"Dau+":function(n,l,e){"use strict";var t=e("8Y7J"),i=e("bujt"),s=e("Fwaw"),o=e("5GAg"),a=e("omvX"),r=e("Mr+X"),u=e("Gi4r"),c=e("SVse");e("5WMv"),e("WTxg"),e.d(l,"a",(function(){return m})),e.d(l,"b",(function(){return d}));var m=t.qb({encapsulation:0,styles:[["img[_ngcontent-%COMP%]{height:20px}"]],data:{}});function h(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,6,"div",[["style","font-size: .7em;margin: 0;"]],null,null,null,null,null)),(n()(),t.sb(1,0,[["img",1]],null,0,"img",[["style","width: 70px; height: 70px;"]],[[8,"src",4]],[[null,"error"]],(function(n,l,e){var i=!0;return"error"===l&&(i=!1!==n.component.imgError(t.Eb(n,1))&&i),i}),null,null)),(n()(),t.sb(2,0,null,null,4,"button",[["color","warn"],["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.removeFromImages(n.context.$implicit.name)&&t),t}),i.b,i.a)),t.rb(3,180224,null,0,s.b,[t.k,o.h,[2,a.a]],{color:[0,"color"]},null),(n()(),t.sb(4,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"],["style","font-size: 1.3em !important;"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),t.rb(5,9158656,null,0,u.b,[t.k,u.d,[8,null],[2,u.a],[2,t.l]],null,null),(n()(),t.Mb(-1,0,["delete_sweep"]))],(function(n,l){n(l,3,0,"warn"),n(l,5,0)}),(function(n,l){n(l,1,0,l.context.$implicit.image),n(l,2,0,t.Eb(l,3).disabled||null,"NoopAnimations"===t.Eb(l,3)._animationMode),n(l,4,0,t.Eb(l,5).inline,"primary"!==t.Eb(l,5).color&&"accent"!==t.Eb(l,5).color&&"warn"!==t.Eb(l,5).color)}))}function f(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,h)),t.rb(2,278528,null,0,c.l,[t.O,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(n()(),t.hb(0,null,null,0))],(function(n,l){n(l,2,0,l.component.Images)}),null)}function b(n){return t.Ob(0,[(n()(),t.sb(0,0,[["img",1]],null,0,"img",[["style","width: 70px; height: 70px;"]],[[8,"src",4]],[[null,"error"]],(function(n,l,e){var i=!0;return"error"===l&&(i=!1!==n.component.imgError(t.Eb(n,0))&&i),i}),null,null)),(n()(),t.sb(1,0,null,null,4,"button",[["color","warn"],["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var t=!0,i=n.component;return"click"===l&&(t=!1!==i.remove(i.oneImage)&&t),t}),i.b,i.a)),t.rb(2,180224,null,0,s.b,[t.k,o.h,[2,a.a]],{color:[0,"color"]},null),(n()(),t.sb(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"],["style","font-size: 1.3em !important;"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),t.rb(4,9158656,null,0,u.b,[t.k,u.d,[8,null],[2,u.a],[2,t.l]],null,null),(n()(),t.Mb(-1,0,["delete_sweep"]))],(function(n,l){n(l,2,0,"warn"),n(l,4,0)}),(function(n,l){n(l,0,0,l.component.oneImage),n(l,1,0,t.Eb(l,2).disabled||null,"NoopAnimations"===t.Eb(l,2)._animationMode),n(l,3,0,t.Eb(l,4).inline,"primary"!==t.Eb(l,4).color&&"accent"!==t.Eb(l,4).color&&"warn"!==t.Eb(l,4).color)}))}function d(n){return t.Ob(0,[(n()(),t.sb(0,0,null,null,11,"div",[["class","d-flex mb-3 align-items-center"]],null,null,null,null,null)),(n()(),t.sb(1,0,[["file1",1]],null,0,"input",[["accept","image/*"],["hidden",""],["multiple",""],["type","file"]],null,[[null,"change"]],(function(n,l,e){var t=!0;return"change"===l&&(t=!1!==n.component.upload(e.target.files)&&t),t}),null,null)),(n()(),t.sb(2,0,null,null,5,"button",[["color","accent"],["mat-raised-button",""],["style","height: fit-content;"],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var i=!0;return"click"===l&&(i=!1!==n.component.openInput(t.Eb(n,1))&&i),i}),i.b,i.a)),t.rb(3,180224,null,0,s.b,[t.k,o.h,[2,a.a]],{color:[0,"color"]},null),(n()(),t.sb(4,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),t.rb(5,9158656,null,0,u.b,[t.k,u.d,[8,null],[2,u.a],[2,t.l]],null,null),(n()(),t.Mb(-1,0,["add"])),(n()(),t.Mb(7,0,[" "," "])),(n()(),t.Mb(-1,null,[" \xa0\xa0 "])),(n()(),t.hb(16777216,null,null,1,null,f)),t.rb(10,16384,null,0,c.m,[t.O,t.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t.hb(0,[["elseTemplate",2]],null,0,null,b))],(function(n,l){var e=l.component;n(l,3,0,"accent"),n(l,5,0),n(l,10,0,e.multiple,t.Eb(l,11))}),(function(n,l){var e=l.component;n(l,2,0,t.Eb(l,3).disabled||null,"NoopAnimations"===t.Eb(l,3)._animationMode),n(l,4,0,t.Eb(l,5).inline,"primary"!==t.Eb(l,5).color&&"accent"!==t.Eb(l,5).color&&"warn"!==t.Eb(l,5).color),n(l,7,0,e.nameBtn)}))}},fHMi:function(n,l,e){"use strict";e.d(l,"a",(function(){return t}));class t{}}}]);