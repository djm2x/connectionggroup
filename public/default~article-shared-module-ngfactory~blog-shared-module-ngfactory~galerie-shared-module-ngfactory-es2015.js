(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3VwI":function(e,t,i){"use strict";var n=i("8Y7J"),s=i("6UMx"),l=i("Q+lL"),o=i("Xd0L"),a=i("SVse"),r=i("mrSG");class h{constructor(e,t,i){this.bottomSheetRef=e,this.data=t,this.url=i,this.list=[],this.folder=""}ngOnInit(){const e=this.data.fileName.split(";");e.pop(),this.folder=this.data.folder,this.list=e}openLink(e){return r.a(this,void 0,void 0,(function*(){window.open(`${this.url}/${this.folder}/${e}`)}))}}var c=i("lwm9");i.d(t,"a",(function(){return g}));var u=n.qb({encapsulation:0,styles:[[""]],data:{}});function d(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,7,"a",[["class","mat-list-item"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],[[null,"click"]],(function(e,t,i){var n=!0;return"click"===t&&(n=!1!==e.component.openLink(e.parent.context.$implicit)&&n),n}),s.c,s.a)),n.rb(1,1228800,null,3,l.b,[n.k,n.h,[2,l.e],[2,l.a]],null,null),n.Kb(603979776,1,{_lines:1}),n.Kb(603979776,2,{_avatar:0}),n.Kb(603979776,3,{_icon:0}),(e()(),n.sb(5,0,null,1,2,"span",[["class","mat-line"],["mat-line",""]],null,null,null,null,null)),n.rb(6,16384,[[1,4]],0,o.o,[],null,null),(e()(),n.Mb(7,null,["- ",""]))],null,(function(e,t){e(t,0,0,n.Eb(t,1)._avatar||n.Eb(t,1)._icon,n.Eb(t,1)._avatar||n.Eb(t,1)._icon);var i=t.parent.context.$implicit.substring(14);e(t,7,0,i)}))}function m(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),n.hb(16777216,null,null,1,null,d)),n.rb(2,16384,null,0,a.l,[n.O,n.L],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,""!==t.context.$implicit)}),null)}function f(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,3,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,s.d,s.b)),n.rb(1,704512,null,0,l.e,[],null,null),(e()(),n.hb(16777216,null,0,1,null,m)),n.rb(3,278528,null,0,a.k,[n.O,n.L,n.r],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,3,0,t.component.list)}),null)}function p(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,1,"app-download-sheet",[],null,null,null,f,u)),n.rb(1,114688,null,0,h,[c.e,c.a,"BASE_URL"],null,null)],(function(e,t){e(t,1,0)}),null)}var g=n.ob("app-download-sheet",h,p,{},{},[])},"5WMv":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("mrSG"),s=i("XNiG");class l{constructor(e,t){this.filesService=e,this.url=t,this.listOfNames=[],this.imagesToShow=[],this.listToDelete=[],this.files=[],this.nameBtn="",this.folderToSaveInServer="folder",this.multiple=!1,this.oneImage="assets/404.jpg",this.Images=[],this.propertyOfParent=new s.a,this.eventSubmitToParent=new s.a,this.eventSubmitFromParent=new s.a}ngOnInit(){this.propertyOfParent.subscribe(e=>{if(!e)return;const t=e.split(";");if(t.pop(),this.listOfNames=t,this.listToDelete=[],console.log(t),this.multiple)t.forEach((e,t)=>{const i=e;if(null!==i&&i.startsWith("http"))this.Images[t]={name:i,image:i};else if(i){const e=`${this.url}/${this.folderToSaveInServer.replace("_","/")}/${i}`;this.Images[t]={name:e,image:e}}else this.Images[t]={name:"assets/404.jpg",image:"assets/404.jpg"}});else{const e=0!==t.length?t[0]:null;this.oneImage=null!==e&&e.startsWith("http")?e:e?`${this.url}/${this.folderToSaveInServer}/${e}`:"assets/404.jpg"}}),this.eventSubmitFromParent.subscribe(e=>n.a(this,void 0,void 0,(function*(){yield this.submit(e)})))}upload(e){if(this.multiple)for(let t=0;t<e.length;t++){const i=e.item(t);this.listOfNames.push(this.setFileName(i)),this.sendPropertyOfParent(),this.files.push(i),this.files.forEach((e,t)=>{const i=new FileReader;i.onload=()=>{-1===this.Images.findIndex(t=>this.setFileName(e).includes(t.name))&&this.Images.push({name:this.setFileName(e),image:i.result.toString()})},i.readAsDataURL(e)})}else{const t=e.item(0);this.listOfNames=[],this.listOfNames.push(this.setFileName(t)),this.sendPropertyOfParent(),this.files=[],this.files.push(t),this.handleFileInput(t)}}fileToImageFrom(){}handleFileInput(e){const t=new FileReader;t.onload=()=>this.oneImage=t.result.toString(),t.readAsDataURL(e)}imgError(e){e.src="assets/404.jpg"}setIcon(e){const t=e.lastIndexOf("."),i=e.substring(t+1);return"pdf"===i||"pdf;"===i?"assets/svg/pdf.svg":"assets/svg/word.svg"}removeFromImages(e){const t=this.Images.findIndex(t=>e.includes(t.name));this.Images.splice(t,1);const i=this.listOfNames.findIndex(t=>e.includes(t));this.listToDelete.push(this.listOfNames[i]),-1!==i&&(this.listOfNames.splice(i,1),this.sendPropertyOfParent());const n=e.indexOf("_"),s=e.substring(n);-1!==this.files.findIndex(e=>e.name===s)&&this.files.splice(i,1)}remove(e){const t=this.listOfNames.findIndex(t=>e.includes(t));this.listToDelete.push(this.listOfNames[t]),-1!==t&&(this.listOfNames.splice(t,1),this.sendPropertyOfParent());const i=e.indexOf("_"),n=e.substring(i);-1!==this.files.findIndex(e=>e.name===n)&&this.files.splice(t,1),this.oneImage="assets/404.jpg"}openInput(e){e.click()}sendPropertyOfParent(){let e="";this.listOfNames.forEach(t=>{e+=`${t};`}),this.eventSubmitToParent.next(e)}submit(e){return n.a(this,void 0,void 0,(function*(){const t=new FormData;if(this.files.forEach(e=>{const i=this.setFileName(e);t.append("file",e,i),console.log(e)}),t){e.id&&!this.folderToSaveInServer.includes("_")&&(this.folderToSaveInServer=`${this.folderToSaveInServer}_${e.id}`);const i=yield this.filesService.uploadFiles(t,this.folderToSaveInServer).toPromise(),n=yield this.filesService.deleteFiles(this.listToDelete,this.folderToSaveInServer).toPromise();console.log(i,n)}}))}setFileName(e){return`${e.lastModified}_${e.name}`}}},"Dau+":function(e,t,i){"use strict";var n=i("8Y7J"),s=i("bujt"),l=i("Fwaw"),o=i("5GAg"),a=i("omvX"),r=i("Mr+X"),h=i("Gi4r"),c=i("SVse");i("5WMv"),i("WTxg"),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return p}));var u=n.qb({encapsulation:0,styles:[["img[_ngcontent-%COMP%]{height:20px}"]],data:{}});function d(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,6,"div",[["style","font-size: .7em;margin: 0;"]],null,null,null,null,null)),(e()(),n.sb(1,0,[["img",1]],null,0,"img",[["style","width: 70px; height: 70px;"]],[[8,"src",4]],[[null,"error"]],(function(e,t,i){var s=!0;return"error"===t&&(s=!1!==e.component.imgError(n.Eb(e,1))&&s),s}),null,null)),(e()(),n.sb(2,0,null,null,4,"button",[["color","warn"],["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,i){var n=!0;return"click"===t&&(n=!1!==e.component.removeFromImages(e.context.$implicit.name)&&n),n}),s.b,s.a)),n.rb(3,180224,null,0,l.b,[n.k,o.h,[2,a.a]],{color:[0,"color"]},null),(e()(),n.sb(4,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"],["style","font-size: 1.3em !important;"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),n.rb(5,9158656,null,0,h.b,[n.k,h.d,[8,null],[2,h.a],[2,n.l]],null,null),(e()(),n.Mb(-1,0,["delete_sweep"]))],(function(e,t){e(t,3,0,"warn"),e(t,5,0)}),(function(e,t){e(t,1,0,t.context.$implicit.image),e(t,2,0,n.Eb(t,3).disabled||null,"NoopAnimations"===n.Eb(t,3)._animationMode),e(t,4,0,n.Eb(t,5).inline,"primary"!==n.Eb(t,5).color&&"accent"!==n.Eb(t,5).color&&"warn"!==n.Eb(t,5).color)}))}function m(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),n.hb(16777216,null,null,1,null,d)),n.rb(2,278528,null,0,c.k,[n.O,n.L,n.r],{ngForOf:[0,"ngForOf"]},null),(e()(),n.hb(0,null,null,0))],(function(e,t){e(t,2,0,t.component.Images)}),null)}function f(e){return n.Ob(0,[(e()(),n.sb(0,0,[["img",1]],null,0,"img",[["style","width: 70px; height: 70px;"]],[[8,"src",4]],[[null,"error"]],(function(e,t,i){var s=!0;return"error"===t&&(s=!1!==e.component.imgError(n.Eb(e,0))&&s),s}),null,null)),(e()(),n.sb(1,0,null,null,4,"button",[["color","warn"],["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,i){var n=!0,s=e.component;return"click"===t&&(n=!1!==s.remove(s.oneImage)&&n),n}),s.b,s.a)),n.rb(2,180224,null,0,l.b,[n.k,o.h,[2,a.a]],{color:[0,"color"]},null),(e()(),n.sb(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"],["style","font-size: 1.3em !important;"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),n.rb(4,9158656,null,0,h.b,[n.k,h.d,[8,null],[2,h.a],[2,n.l]],null,null),(e()(),n.Mb(-1,0,["delete_sweep"]))],(function(e,t){e(t,2,0,"warn"),e(t,4,0)}),(function(e,t){e(t,0,0,t.component.oneImage),e(t,1,0,n.Eb(t,2).disabled||null,"NoopAnimations"===n.Eb(t,2)._animationMode),e(t,3,0,n.Eb(t,4).inline,"primary"!==n.Eb(t,4).color&&"accent"!==n.Eb(t,4).color&&"warn"!==n.Eb(t,4).color)}))}function p(e){return n.Ob(0,[(e()(),n.sb(0,0,null,null,11,"div",[["class","d-flex mb-3 align-items-center"]],null,null,null,null,null)),(e()(),n.sb(1,0,[["file1",1]],null,0,"input",[["accept","image/*"],["hidden",""],["multiple",""],["type","file"]],null,[[null,"change"]],(function(e,t,i){var n=!0;return"change"===t&&(n=!1!==e.component.upload(i.target.files)&&n),n}),null,null)),(e()(),n.sb(2,0,null,null,5,"button",[["color","accent"],["mat-raised-button",""],["style","height: fit-content;"],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,i){var s=!0;return"click"===t&&(s=!1!==e.component.openInput(n.Eb(e,1))&&s),s}),s.b,s.a)),n.rb(3,180224,null,0,l.b,[n.k,o.h,[2,a.a]],{color:[0,"color"]},null),(e()(),n.sb(4,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,r.b,r.a)),n.rb(5,9158656,null,0,h.b,[n.k,h.d,[8,null],[2,h.a],[2,n.l]],null,null),(e()(),n.Mb(-1,0,["add"])),(e()(),n.Mb(7,0,[" "," "])),(e()(),n.Mb(-1,null,[" \xa0\xa0 "])),(e()(),n.hb(16777216,null,null,1,null,m)),n.rb(10,16384,null,0,c.l,[n.O,n.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),n.hb(0,[["elseTemplate",2]],null,0,null,f))],(function(e,t){var i=t.component;e(t,3,0,"accent"),e(t,5,0),e(t,10,0,i.multiple,n.Eb(t,11))}),(function(e,t){var i=t.component;e(t,2,0,n.Eb(t,3).disabled||null,"NoopAnimations"===n.Eb(t,3)._animationMode),e(t,4,0,n.Eb(t,5).inline,"primary"!==n.Eb(t,5).color&&"accent"!==n.Eb(t,5).color&&"warn"!==n.Eb(t,5).color),e(t,7,0,i.nameBtn)}))}},Fr4G:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}},Q6Ar:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return u}));var n=i("8Y7J"),s=i("IheW"),l=i("SVse");let o=(()=>{class e{constructor(e,t){this.http=e,this.doc=t,this.saveSelection=()=>{if(this.doc.getSelection){const e=this.doc.getSelection();e.getRangeAt&&e.rangeCount&&(this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString())}else this.savedSelection=this.doc.getSelection&&this.doc.createRange?document.createRange():null}}executeCommand(e){["h1","h2","h3","h4","h5","h6","p","pre"].includes(e)?this.doc.execCommand("formatBlock",!1,e):this.doc.execCommand(e,!1,null)}createLink(e){e.includes("http")?this.insertHtml('<a href="'+e+'" target="_blank">'+this.selectedText+"</a>"):this.doc.execCommand("createlink",!1,e)}insertColor(e,t){this.restoreSelection()&&this.doc.execCommand("textColor"===t?"foreColor":"hiliteColor",!1,e)}setFontName(e){this.doc.execCommand("fontName",!1,e)}setFontSize(e){this.doc.execCommand("fontSize",!1,e)}insertHtml(e){if(!this.doc.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")}restoreSelection(){if(!this.savedSelection)return!1;if(this.doc.getSelection){const e=this.doc.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this.doc.getSelection||void 0}executeInNextQueueIteration(e,t=100){setTimeout(e,t)}checkSelection(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0}uploadImage(e){const t=new FormData;return t.append("file",e,e.name),this.http.post(this.uploadUrl,t,{reportProgress:!0,observe:"events",withCredentials:this.uploadWithCredentials})}insertImage(e){this.doc.execCommand("insertImage",!1,e)}setDefaultParagraphSeparator(e){this.doc.execCommand("defaultParagraphSeparator",!1,e)}createCustomClass(e){let t=this.selectedText;if(e){const i=e.tag?e.tag:"span";t="<"+i+' class="'+e.class+'">'+this.selectedText+"</"+i+">"}this.insertHtml(t)}insertVideo(e){e.match("www.youtube.com")&&this.insertYouTubeVideoTag(e),e.match("vimeo.com")&&this.insertVimeoVideoTag(e)}insertYouTubeVideoTag(e){const t=e.split("v=")[1];this.insertHtml(`\n      <div style='position: relative'>\n        <img style='position: absolute; left:200px; top:140px'\n             src="https://img.icons8.com/color/96/000000/youtube-play.png"/>\n        <a href='${e}' target='_blank'>\n          <img src="${`https://img.youtube.com/vi/${t}/0.jpg`}" alt="click to watch"/>\n        </a>\n      </div>`)}insertVimeoVideoTag(e){const t=this.http.get(`https://vimeo.com/api/oembed.json?url=${e}`).subscribe(i=>{this.insertHtml(`<div>\n        <a href='${e}' target='_blank'>\n          <img src="${i.thumbnail_url_with_play_button}" alt="${i.title}"/>\n        </a>\n      </div>`),t.unsubscribe()})}nextNode(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}getRangeSelectedNodes(e,t){let i=e.startContainer;const n=e.endContainer;let s=[];if(i===n)s=[i];else{for(;i&&i!==n;)s.push(i=this.nextNode(i));for(i=e.startContainer;i&&i!==e.commonAncestorContainer;)s.unshift(i),i=i.parentNode}if(t)for(i=e.commonAncestorContainer;i;)s.push(i),i=i.parentNode;return s}getSelectedNodes(){const e=[];if(this.doc.getSelection){const t=this.doc.getSelection();for(let i=0,n=t.rangeCount;i<n;++i)e.push.apply(e,this.getRangeSelectedNodes(t.getRangeAt(i),!0))}return e}replaceWithOwnChildren(e){const t=e.parentNode;for(;e.hasChildNodes();)t.insertBefore(e.firstChild,e);t.removeChild(e)}removeSelectedElements(e){const t=e.toLowerCase().split(",");this.getSelectedNodes().forEach(e=>{1===e.nodeType&&t.indexOf(e.tagName.toLowerCase())>-1&&this.replaceWithOwnChildren(e)})}}return e.ngInjectableDef=Object(n.Sb)({factory:function(){return new e(Object(n.Tb)(s.c),Object(n.Tb)(l.d))},token:e,providedIn:"root"}),e})();const a={editable:!0,spellcheck:!0,height:"auto",minHeight:"0",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",outline:!0};class r{constructor(e,t,i){this.r=e,this.editorService=t,this.doc=i,this.htmlMode=!1,this.linkSelected=!1,this.block="default",this.fontName="Times New Roman",this.fontSize="3",this.headings=[{label:"Heading 1",value:"h1"},{label:"Heading 2",value:"h2"},{label:"Heading 3",value:"h3"},{label:"Heading 4",value:"h4"},{label:"Heading 5",value:"h5"},{label:"Heading 6",value:"h6"},{label:"Heading 7",value:"h7"},{label:"Paragraph",value:"p"},{label:"Predefined",value:"pre"},{label:"Standard",value:"div"},{label:"default",value:"default"}],this.fontSizes=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"}],this.customClassId="-1",this.customClassList=[{label:"",value:""}],this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"],this.buttons=["bold","italic","underline","strikeThrough","subscript","superscript","justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent","insertUnorderedList","insertOrderedList","link"],this.fonts=[{label:"",value:""}],this.execute=new n.m}set customClasses(e){e&&(this._customClasses=e,this.customClassList=this._customClasses.map((e,t)=>({label:e.name,value:t.toString()})),this.customClassList.unshift({label:"Clear Class",value:"-1"}))}set defaultFontName(e){e&&(this.fontName=e)}set defaultFontSize(e){e&&(this.fontSize=e)}get isLinkButtonDisabled(){return this.htmlMode||!Boolean(this.editorService.selectedText)}triggerCommand(e){this.execute.emit(e)}triggerButtons(){this.showToolbar&&this.buttons.forEach(e=>{const t=this.doc.queryCommandState(e),i=this.doc.getElementById(e+"-"+this.id);t?this.r.addClass(i,"active"):this.r.removeClass(i,"active")})}triggerBlocks(e){if(!this.showToolbar)return;this.linkSelected=e.findIndex(e=>"A"===e.nodeName)>-1;let t=!1;this.select.forEach(i=>{const n=e.find(e=>e.nodeName===i);void 0!==n&&i===n.nodeName?!1===t&&(this.block=n.nodeName.toLowerCase(),t=!0):!1===t&&(this.block="default")}),t=!1,this._customClasses&&this._customClasses.forEach((i,n)=>{void 0!==e.find(e=>{if(e instanceof Element)return e.className===i.class})?!1===t&&(this.customClassId=n.toString(),t=!0):!1===t&&(this.customClassId="-1")}),Object.keys(this.tagMap).map(t=>{const i=this.doc.getElementById(this.tagMap[t]+"-"+this.id),n=e.find(e=>e.nodeName===t);void 0!==n&&t===n.nodeName?this.r.addClass(i,"active"):this.r.removeClass(i,"active")}),this.foreColour=this.doc.queryCommandValue("ForeColor"),this.fontSize=this.doc.queryCommandValue("FontSize"),this.fontName=this.doc.queryCommandValue("FontName").replace(/"/g,""),this.backColor=this.doc.queryCommandValue("backColor")}insertUrl(){let e="https://";const t=this.editorService.savedSelection;if(t&&"A"===t.commonAncestorContainer.parentElement.nodeName){const i=t.commonAncestorContainer.parentElement;""!==i.href&&(e=i.href)}(e=prompt("Insert URL link",e))&&""!==e&&"https://"!==e&&this.editorService.createLink(e)}insertVideo(){this.execute.emit("");const e=prompt("Insert Video link","https://");e&&""!==e&&"https://"!==e&&this.editorService.insertVideo(e)}insertColor(e,t){this.editorService.insertColor(e,t),this.execute.emit("")}setFontName(e){this.editorService.setFontName(e),this.execute.emit("")}setFontSize(e){this.editorService.setFontSize(e),this.execute.emit("")}setEditorMode(e){const t=this.doc.getElementById("toggleEditorMode-"+this.id);e?this.r.addClass(t,"active"):this.r.removeClass(t,"active"),this.htmlMode=e}onFileChanged(e){const t=e.target.files[0];if(t.type.includes("image/"))if(this.uploadUrl)this.editorService.uploadImage(t).subscribe(e=>{e instanceof s.h&&(this.editorService.insertImage(e.body.imageUrl),this.fileReset())});else{const e=new FileReader;e.onload=e=>{this.editorService.insertImage(e.currentTarget.result.toString())},e.readAsDataURL(t)}}fileReset(){this.myInputFile.nativeElement.value=""}setCustomClass(e){"-1"===e?this.execute.emit("clear"):this.editorService.createCustomClass(this._customClasses[+e])}isButtonHidden(e){if(!e)return!1;if(!(this.hiddenButtons instanceof Array))return!1;let t;for(const i of this.hiddenButtons)if(i instanceof Array&&(t=i.find(t=>t===e)),t)break;return void 0!==t}}function h(e){return null!=e}class c{constructor(e,t,i,s,l,o,r){this.r=e,this.editorService=t,this.doc=i,this.sanitizer=s,this.cdRef=l,this.autoFocus=r,this.modeVisual=!0,this.showPlaceholder=!1,this.disabled=!1,this.focused=!1,this.touched=!1,this.changed=!1,this.id="",this.config=a,this.placeholder="",this.viewMode=new n.m,this.blurEvent=new n.m,this.focusEvent=new n.m,this.tabindex=-1;const h=Number(o);this.tabIndex=h||0===h?h:null}onFocus(){this.focus()}ngOnInit(){this.config.toolbarPosition=this.config.toolbarPosition?this.config.toolbarPosition:a.toolbarPosition}ngAfterViewInit(){h(this.autoFocus)&&this.focus()}executeCommand(e){this.focus(),"toggleEditorMode"===e?this.toggleEditorMode(this.modeVisual):""!==e&&("clear"===e?(this.editorService.removeSelectedElements(this.getCustomTags()),this.onContentChange(this.textArea.nativeElement)):"default"===e?(this.editorService.removeSelectedElements("h1,h2,h3,h4,h5,h6,p,pre"),this.onContentChange(this.textArea.nativeElement)):this.editorService.executeCommand(e),this.exec())}onTextAreaFocus(e){this.focused?e.stopPropagation():(this.focused=!0,this.focusEvent.emit(e),this.touched&&this.changed||this.editorService.executeInNextQueueIteration(()=>{this.configure(),this.touched=!0}))}onTextAreaMouseOut(e){this.editorService.saveSelection()}onTextAreaBlur(e){if(this.editorService.executeInNextQueueIteration(this.editorService.saveSelection),"function"==typeof this.onTouched&&this.onTouched(),null!==e.relatedTarget){const t=e.relatedTarget.parentElement;t.classList.contains("angular-editor-toolbar-set")||t.classList.contains("ae-picker")||(this.blurEvent.emit(e),this.focused=!1)}}focus(){this.modeVisual?this.textArea.nativeElement.focus():(this.doc.getElementById("sourceText"+this.id).focus(),this.focused=!0)}onContentChange(e){let t="";(t=this.modeVisual?e.innerHTML:e.innerText)&&"<br>"!==t||(t=""),"function"==typeof this.onChange&&(this.onChange(this.config.sanitize||void 0===this.config.sanitize?this.sanitizer.sanitize(n.H.HTML,t):t),!t!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder)),this.changed=!0}registerOnChange(e){this.onChange=t=>e("<br>"===t?"":t)}registerOnTouched(e){this.onTouched=e}writeValue(e){(!e||"<br>"===e||""===e)!==this.showPlaceholder&&this.togglePlaceholder(this.showPlaceholder),void 0!==e&&""!==e&&"<br>"!==e||(e=null),this.refreshView(e)}refreshView(e){this.r.setProperty(this.textArea.nativeElement,"innerHTML",null===e?"":e)}togglePlaceholder(e){e?(this.r.removeClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!1):(this.r.addClass(this.editorWrapper.nativeElement,"show-placeholder"),this.showPlaceholder=!0)}setDisabledState(e){this.r[e?"addClass":"removeClass"](this.textArea.nativeElement,"disabled"),this.disabled=e}toggleEditorMode(e){let t;const i=this.textArea.nativeElement;if(e){t=this.r.createText(i.innerHTML),this.r.setProperty(i,"innerHTML",""),this.r.setProperty(i,"contentEditable",!1);const e=this.r.createElement("pre");this.r.setStyle(e,"margin","0"),this.r.setStyle(e,"outline","none");const n=this.r.createElement("code");this.r.setProperty(n,"id","sourceText"+this.id),this.r.setStyle(n,"display","block"),this.r.setStyle(n,"white-space","pre-wrap"),this.r.setStyle(n,"word-break","keep-all"),this.r.setStyle(n,"outline","none"),this.r.setStyle(n,"margin","0"),this.r.setStyle(n,"background-color","#fff5b9"),this.r.setProperty(n,"contentEditable",!0),this.r.appendChild(n,t),this.focusInstance=this.r.listen(n,"focus",e=>this.onTextAreaFocus(e)),this.blurInstance=this.r.listen(n,"blur",e=>this.onTextAreaBlur(e)),this.r.appendChild(e,n),this.r.appendChild(i,e),this.doc.execCommand("defaultParagraphSeparator",!1,"div"),this.modeVisual=!1,this.viewMode.emit(!1),n.focus()}else this.doc.querySelectorAll?this.r.setProperty(i,"innerHTML",i.innerText):((t=this.doc.createRange()).selectNodeContents(i.firstChild),this.r.setProperty(i,"innerHTML",t.toString())),this.r.setProperty(i,"contentEditable",!0),this.modeVisual=!0,this.viewMode.emit(!0),this.onContentChange(i),i.focus();this.editorToolbar.setEditorMode(!this.modeVisual)}exec(){let e;this.editorToolbar.triggerButtons(),this.doc.getSelection&&(e=this.doc.getSelection(),this.editorService.executeInNextQueueIteration(this.editorService.saveSelection));let t=e.focusNode;const i=[];for(;t&&"editor"!==t.id;)i.unshift(t),t=t.parentNode;this.editorToolbar.triggerBlocks(i)}configure(){this.editorService.uploadUrl=this.config.uploadUrl,this.editorService.uploadWithCredentials=this.config.uploadWithCredentials,this.config.defaultParagraphSeparator&&this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator),this.config.defaultFontName&&this.editorService.setFontName(this.config.defaultFontName),this.config.defaultFontSize&&this.editorService.setFontSize(this.config.defaultFontSize)}getFonts(){return(this.config.fonts?this.config.fonts:a.fonts).map(e=>({label:e.name,value:e.name}))}getCustomTags(){const e=["span"];return this.config.customClasses.forEach(t=>{void 0!==t.tag&&(e.includes(t.tag)||e.push(t.tag))}),e.join(",")}ngOnDestroy(){this.blurInstance&&this.blurInstance(),this.focusInstance&&this.focusInstance()}filterStyles(e){return e.replace("position: fixed;","")}}class u{constructor(e,t){this.elRef=e,this.r=t,this.options=[],this.disabled=!1,this.optionId=0,this.opened=!1,this.hidden="inline-block",this.changeEvent=new n.m,this.onChange=()=>{},this.onTouched=()=>{}}get label(){return this.selectedOption&&this.selectedOption.hasOwnProperty("label")?this.selectedOption.label:"Select"}get value(){return this.selectedOption.value}ngOnInit(){this.selectedOption=this.options[0],h(this.isHidden)&&this.isHidden&&this.hide()}hide(){this.hidden="none"}optionSelect(e,t){t.stopPropagation(),this.setValue(e.value),this.onChange(this.selectedOption.value),this.changeEvent.emit(this.selectedOption.value),this.onTouched(),this.opened=!1}toggleOpen(e){this.disabled||(this.opened=!this.opened)}onClick(e){this.elRef.nativeElement.contains(e.target)||this.close()}close(){this.opened=!1}get isOpen(){return this.opened}writeValue(e){e&&"string"==typeof e&&this.setValue(e)}setValue(e){let t=0;const i=this.options.find((i,n)=>(t=n,i.value===e));i&&(this.selectedOption=i,this.optionId=t)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.labelButton.nativeElement.disabled=e,this.r[e?"addClass":"removeClass"](this.labelButton.nativeElement,"disabled"),this.disabled=e}handleKeyDown(e){if(this.opened)switch(e.key){case"ArrowDown":this._handleArrowDown(e);break;case"ArrowUp":this._handleArrowUp(e);break;case"Space":this._handleSpace(e);break;case"Enter":this._handleEnter(e);break;case"Tab":this._handleTab(e);break;case"Escape":this.close(),e.preventDefault();break;case"Backspace":this._handleBackspace()}}_handleArrowDown(e){this.optionId<this.options.length-1&&this.optionId++}_handleArrowUp(e){this.optionId>=1&&this.optionId--}_handleSpace(e){}_handleEnter(e){this.optionSelect(this.options[this.optionId],e)}_handleTab(e){}_handleBackspace(){}}class d{}}}]);